<!DOCTYPE HTML>
<html>
	<head>
		<title>Strongly Typed by HTML4 UP</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="../view/design.css" />
	</head>

  <body>
    <div class="wrapper">
      <div class="title-text">
        <div class="title login">Sign up Form</div>
        <div class="title signup">Sign up Form</div>
      </div>
      <div class="form-container">
        <div class="slide-controls">
          <input type="radio" name="slide" id="login" checked>
          <input type="radio" name="slide" id="signup">
          <label for="login" class="slide login">User</label>
          <label for="signup" class="slide signup">Admin</label>
          <div class="slider-tab"></div>
        </div>

        <div class="form-inner">
          <form id="signUpForm" action="../control/sign.php" method="POST" class="login">
              <div class="field">
                  <input type="text" name="emailU" id="emailU" placeholder="Email Address">
              </div>
              <div class="field">
                <input type="text" name="nameU" id="nameU" placeholder="Name">
            </div>
            <div class="field">
                <input type="date" name="dateU" id="dateU" placeholder="Birth Date">
            </div>
              <div class="field">
                  <input type="password" name="passwordU" id="passwordU" placeholder="Password">
              </div>
              <div class="pass-link"><a href="#">Forgot password?</a></div>
              <div class="field btn">
                  <div class="btn-layer"></div>
                  <input type="submit" name="submitU" value="Sign up">
              </div>
              <div class="signup-link">Not a User? <a href="">Sign up as Admin</a></div>
              <div id="userErrorMessages" style="color: red;"></div>
          </form>
      
          <form id="adminSignUpForm" action="../control/sign.php" method="POST" class="signup">
              <div class="field">
                  <input type="text" name="emailA" id="emailA" placeholder="Email Address">
              </div>
              <div class="field">
                <input type="text" name="nameA" id="nameA" placeholder="Name">
            </div>
            <div class="field">
                <input type="date" name="dateA" id="dateA" placeholder="Birth Date">
            </div>
              <div class="field">
                  <input type="password" name="passwordA" id="passwordA" placeholder="Password">
              </div>
              <div class="pass-link"><a href="#">Forgot password?</a></div>
              <div class="field btn">
                  <div class="btn-layer"></div>
                  <input type="submit" name="submitA" value="Sign up">
              </div>
              <div id="adminErrorMessages" style="color: red;"></div>
          </form>
      </div>

      </div>
    </div>
    
    <script>
        const loginText = document.querySelector(".title-text .login");
        const loginForm = document.querySelector("form.login");
        const loginBtn = document.querySelector("label.login");
        const signupBtn = document.querySelector("label.signup");
        const signupLink = document.querySelector("form .signup-link a");
        signupBtn.onclick = (()=>{
        loginForm.style.marginLeft = "-50%";
        loginText.style.marginLeft = "-50%";
        });
        loginBtn.onclick = (()=>{
        loginForm.style.marginLeft = "0%";
        loginText.style.marginLeft = "0%";
        });
        signupLink.onclick = (()=>{
        signupBtn.click();
        return false;
        });

        function isValidEmail(email) {
            const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailPattern.test(email);
        }

        function isValidName(name) {
            const namePattern = /^[a-zA-ZÀ-ÖØ-öø-ÿ\s'-]+$/;

            if (name && namePattern.test(name)) {
                return true; 
            } else {
                return false; 
            }
        }

        function isValidPassword(password) {
            const passwordPattern = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&#+])[A-Za-z\d@$!%*?&#+]{8,}$/;

            if (passwordPattern.test(password)) {
                return true; 
            } else {
                return false; 
            }
        }

        function isValidAdminPassword(password) {
            const adminCode = "ADMIN2024";
            const hasAdminCode = password.includes(adminCode);
            const minLength = 8;
            const hasUppercase = /[A-Z]/.test(password);
            const hasLowercase = /[a-z]/.test(password);
            const hasNumber = /[0-9]/.test(password);
            const hasSymbol = /[\W_]/.test(password); // Matches any non-alphanumeric character (symbol)

            if (!hasAdminCode || password.length < minLength || !hasUppercase || !hasLowercase|| !hasNumber || !hasSymbol) {
                return false;
            }

            return true;
        }



      const userForm = document.getElementById("signUpForm");
      const userErrorMessages = document.getElementById("userErrorMessages");
  
      userForm.addEventListener("submit", function (e) {
          let errors = [];
          userErrorMessages.innerHTML = ""; 
  
          const emailU = document.getElementById("emailU").value.trim();
          const nameU = document.getElementById("nameU").value.trim();
          const passwordU = document.getElementById("passwordU").value.trim();
  
          if (!emailU || !isValidEmail(emailU)) {
              errors.push("Valid Email is required.");
          }
          if (!nameU || !isValidName(nameU)) {
              errors.push("Valid Name is required.");
          }
          if (!isValidPassword(passwordU)) {
              errors.push("Valid Password is required.");
          }
  
          if (errors.length > 0) {
              e.preventDefault(); 
              userErrorMessages.innerHTML = errors.join("<br>");
          }
      });
  
      const adminForm = document.getElementById("adminSignUpForm");
      const adminErrorMessages = document.getElementById("adminErrorMessages");
  
      adminForm.addEventListener("submit", function (e) {
          let errors = [];
          adminErrorMessages.innerHTML = ""; 
  
          const emailA = document.getElementById("emailA").value.trim();
          const nameA = document.getElementById("nameA").value.trim();
          const passwordA = document.getElementById("passwordA").value.trim();
  
          if (!emailA || !isValidEmail(emailA)) {
              errors.push("Valid Email is required.");
          }
          if (!nameA || !isValidName(nameA)) {
              errors.push("Valid Name is required.");
          }
          if (!isValidAdminPassword(passwordA)) {
              errors.push("Valid Password is required.");
          }
  
          if (errors.length > 0) {
              e.preventDefault(); 
              adminErrorMessages.innerHTML = errors.join("<br>");
          }
      });
  </script>
  
  <style>
      .error {
          color: red;
          font-size: 0.9em;
      }
  </style>
  </body>

